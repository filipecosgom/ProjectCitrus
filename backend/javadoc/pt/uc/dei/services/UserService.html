<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Tue Jul 15 19:20:40 WEST 2025 -->
<title>UserService</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-07-15">
<meta name="description" content="declaration: package: pt.uc.dei.services, class: UserService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">pt.uc.dei.services</a></div>
<h1 title="Class UserService" class="title">Class UserService</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">pt.uc.dei.services.UserService</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">UserService</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/Serializable.html" title="class or interface in java.io" class="external-link">Serializable</a></span></div>
<div class="block">Service class for managing user-related operations in the system.
 <p>
 Provides functionality for user verification, registration, activation, profile management,
 finished courses, admin permissions, and temporary user management. Integrates with repositories,
 mappers, notification and email services, and utilities for persistence and business logic.
 <p>
 This class is a stateless EJB, making it eligible for dependency injection and transaction management.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../serialized-form.html#pt.uc.dei.services.UserService">Serialized Form</a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>(package private) <a href="../repositories/ActivationTokenRepository.html" title="class in pt.uc.dei.repositories">ActivationTokenRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#activationTokenRepository" class="member-name-link">activationTokenRepository</a></code></div>
<div class="col-last even-row-color">
<div class="block">Injected repository for activation token persistence.</div>
</div>
<div class="col-first odd-row-color"><code>(package private) <a href="../repositories/AppraisalRepository.html" title="class in pt.uc.dei.repositories">AppraisalRepository</a></code></div>
<div class="col-second odd-row-color"><code><a href="#appraisalRepository" class="member-name-link">appraisalRepository</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="../repositories/CourseRepository.html" title="class in pt.uc.dei.repositories">CourseRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#courseRepository" class="member-name-link">courseRepository</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="EmailService.html" title="class in pt.uc.dei.services">EmailService</a></code></div>
<div class="col-second odd-row-color"><code><a href="#emailService" class="member-name-link">emailService</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="../mapper/FinishedCourseMapper.html" title="interface in pt.uc.dei.mapper">FinishedCourseMapper</a></code></div>
<div class="col-second even-row-color"><code><a href="#finishedCourseMapper" class="member-name-link">finishedCourseMapper</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="../repositories/FinishedCourseRepository.html" title="class in pt.uc.dei.repositories">FinishedCourseRepository</a></code></div>
<div class="col-second odd-row-color"><code><a href="#finishedCourseRepository" class="member-name-link">finishedCourseRepository</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="../utils/JWTUtil.html" title="class in pt.uc.dei.utils">JWTUtil</a></code></div>
<div class="col-second even-row-color"><code><a href="#jwtUtil" class="member-name-link">jwtUtil</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final org.apache.logging.log4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#LOGGER" class="member-name-link">LOGGER</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Logger instance for logging user service operations.</div>
</div>
<div class="col-first even-row-color"><code>(package private) <a href="NotificationService.html" title="class in pt.uc.dei.services">NotificationService</a></code></div>
<div class="col-second even-row-color"><code><a href="#notificationService" class="member-name-link">notificationService</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>private static final long</code></div>
<div class="col-second odd-row-color"><code><a href="#serialVersionUID" class="member-name-link">serialVersionUID</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Serial version UID for ensuring class consistency during serialization.</div>
</div>
<div class="col-first even-row-color"><code>(package private) <a href="../repositories/TemporaryUserRepository.html" title="class in pt.uc.dei.repositories">TemporaryUserRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#temporaryUserRepository" class="member-name-link">temporaryUserRepository</a></code></div>
<div class="col-last even-row-color">
<div class="block">Injected repository for managing temporary users.</div>
</div>
<div class="col-first odd-row-color"><code>(package private) <a href="TokenService.html" title="class in pt.uc.dei.services">TokenService</a></code></div>
<div class="col-second odd-row-color"><code><a href="#tokenService" class="member-name-link">tokenService</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Injected service for token-related operations.</div>
</div>
<div class="col-first even-row-color"><code>(package private) <a href="../utils/TwoFactorUtil.html" title="class in pt.uc.dei.utils">TwoFactorUtil</a></code></div>
<div class="col-second even-row-color"><code><a href="#twoFactorUtil" class="member-name-link">twoFactorUtil</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>(package private) <a href="../mapper/UserMapper.html" title="interface in pt.uc.dei.mapper">UserMapper</a></code></div>
<div class="col-second odd-row-color"><code><a href="#userMapper" class="member-name-link">userMapper</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
<div class="col-first even-row-color"><code>(package private) <a href="../repositories/UserRepository.html" title="class in pt.uc.dei.repositories">UserRepository</a></code></div>
<div class="col-second even-row-color"><code><a href="#userRepository" class="member-name-link">userRepository</a></code></div>
<div class="col-last even-row-color">
<div class="block">Injected repository for managing permanent users.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">UserService</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../dtos/FinishedCourseDTO.html" title="class in pt.uc.dei.dtos">FinishedCourseDTO</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addFinishedCourse(java.lang.Long,java.lang.Long)" class="member-name-link">addFinishedCourse</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;courseId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a finished course for a user.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkAndUpdateAccountState(java.lang.Long)" class="member-name-link">checkAndUpdateAccountState</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks and updates the account state of a user based on profile completeness.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkIfManagerOfUser(java.lang.Long,java.lang.Long)" class="member-name-link">checkIfManagerOfUser</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;managerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a user is managed by a specific manager.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkIfUserIsAdmin(java.lang.Long)" class="member-name-link">checkIfUserIsAdmin</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a user is an admin.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkIfUserStillIsManager(java.lang.Long)" class="member-name-link">checkIfUserStillIsManager</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;managerId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a user with the given ID still manages any users.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteTemporaryUser(pt.uc.dei.dtos.TemporaryUserDTO)" class="member-name-link">deleteTemporaryUser</a><wbr>(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;userToDelete)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes a temporary user from the repository.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteTemporaryUserInformation(pt.uc.dei.dtos.TemporaryUserDTO)" class="member-name-link">deleteTemporaryUserInformation</a><wbr>(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;userToDelete)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes temporary user information, removing associated activation tokens.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findIfUserExists(java.lang.String)" class="member-name-link">findIfUserExists</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a user with the given email exists in the system.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateUsersCSV(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Language,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,boolean)" class="member-name-link">generateUsersCSV</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Language.html" title="enum class in pt.uc.dei.enums">Language</a>&nbsp;lang,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 boolean&nbsp;isAdmin)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates a CSV file of all users matching the given filters and sorting (no pagination).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>byte[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#generateUsersXLSX(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Language,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,boolean)" class="member-name-link">generateUsersXLSX</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Language.html" title="enum class in pt.uc.dei.enums">Language</a>&nbsp;lang,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 boolean&nbsp;isAdmin)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Generates an XLSX file of all users matching the given filters and sorting (no pagination).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../dtos/UserDTO.html" title="class in pt.uc.dei.dtos">UserDTO</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUser(java.lang.Long)" class="member-name-link">getUser</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a user by their unique ID and maps to a UserDTO.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../dtos/UserDTO.html" title="class in pt.uc.dei.dtos">UserDTO</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserProfile(java.lang.Long,boolean)" class="member-name-link">getUserProfile</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 boolean&nbsp;fullResponse)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a user profile by ID, with either full or summary response.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUsers(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,int,int)" class="member-name-link">getUsers</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 int&nbsp;offset,
 int&nbsp;limit)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a paginated and filtered list of users as DTOs, with total count and pagination info.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a><wbr>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#registerUser(pt.uc.dei.dtos.TemporaryUserDTO)" class="member-name-link">registerUser</a><wbr>(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;newUser)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Registers a new temporary user in the system.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#temporaryUserEntityToTemporaryUserDTO(pt.uc.dei.entities.TemporaryUserEntity)" class="member-name-link">temporaryUserEntityToTemporaryUserDTO</a><wbr>(<a href="../entities/TemporaryUserEntity.html" title="class in pt.uc.dei.entities">TemporaryUserEntity</a>&nbsp;temporaryUser)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Converts a <a href="../entities/TemporaryUserEntity.html" title="class in pt.uc.dei.entities"><code>TemporaryUserEntity</code></a> to a <a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos"><code>TemporaryUserDTO</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateAdminPermissions(java.lang.Long,boolean,java.lang.Long)" class="member-name-link">updateAdminPermissions</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 boolean&nbsp;isAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;requesterId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates admin permissions for a user.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>private void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateManagerStatus(pt.uc.dei.entities.UserEntity)" class="member-name-link">updateManagerStatus</a><wbr>(<a href="../entities/UserEntity.html" title="class in pt.uc.dei.entities">UserEntity</a>&nbsp;user)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the manager status of a user to false and persists the change.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateUser(java.lang.Long,pt.uc.dei.dtos.UpdateUserDTO)" class="member-name-link">updateUser</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="../dtos/UpdateUserDTO.html" title="class in pt.uc.dei.dtos">UpdateUserDTO</a>&nbsp;updateUserDTO)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates an existing user with the provided data.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="LOGGER">
<h3>LOGGER</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">org.apache.logging.log4j.Logger</span>&nbsp;<span class="element-name">LOGGER</span></div>
<div class="block">Logger instance for logging user service operations.</div>
</section>
</li>
<li>
<section class="detail" id="serialVersionUID">
<h3>serialVersionUID</h3>
<div class="member-signature"><span class="modifiers">private static final</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">serialVersionUID</span></div>
<div class="block">Serial version UID for ensuring class consistency during serialization.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../../../../constant-values.html#pt.uc.dei.services.UserService.serialVersionUID">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="userRepository">
<h3>userRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/UserRepository.html" title="class in pt.uc.dei.repositories">UserRepository</a></span>&nbsp;<span class="element-name">userRepository</span></div>
<div class="block">Injected repository for managing permanent users.</div>
</section>
</li>
<li>
<section class="detail" id="appraisalRepository">
<h3>appraisalRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/AppraisalRepository.html" title="class in pt.uc.dei.repositories">AppraisalRepository</a></span>&nbsp;<span class="element-name">appraisalRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="notificationService">
<h3>notificationService</h3>
<div class="member-signature"><span class="return-type"><a href="NotificationService.html" title="class in pt.uc.dei.services">NotificationService</a></span>&nbsp;<span class="element-name">notificationService</span></div>
</section>
</li>
<li>
<section class="detail" id="temporaryUserRepository">
<h3>temporaryUserRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/TemporaryUserRepository.html" title="class in pt.uc.dei.repositories">TemporaryUserRepository</a></span>&nbsp;<span class="element-name">temporaryUserRepository</span></div>
<div class="block">Injected repository for managing temporary users.</div>
</section>
</li>
<li>
<section class="detail" id="tokenService">
<h3>tokenService</h3>
<div class="member-signature"><span class="return-type"><a href="TokenService.html" title="class in pt.uc.dei.services">TokenService</a></span>&nbsp;<span class="element-name">tokenService</span></div>
<div class="block">Injected service for token-related operations.</div>
</section>
</li>
<li>
<section class="detail" id="courseRepository">
<h3>courseRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/CourseRepository.html" title="class in pt.uc.dei.repositories">CourseRepository</a></span>&nbsp;<span class="element-name">courseRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="finishedCourseRepository">
<h3>finishedCourseRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/FinishedCourseRepository.html" title="class in pt.uc.dei.repositories">FinishedCourseRepository</a></span>&nbsp;<span class="element-name">finishedCourseRepository</span></div>
</section>
</li>
<li>
<section class="detail" id="emailService">
<h3>emailService</h3>
<div class="member-signature"><span class="return-type"><a href="EmailService.html" title="class in pt.uc.dei.services">EmailService</a></span>&nbsp;<span class="element-name">emailService</span></div>
</section>
</li>
<li>
<section class="detail" id="jwtUtil">
<h3>jwtUtil</h3>
<div class="member-signature"><span class="annotations">@Inject
</span><span class="return-type"><a href="../utils/JWTUtil.html" title="class in pt.uc.dei.utils">JWTUtil</a></span>&nbsp;<span class="element-name">jwtUtil</span></div>
</section>
</li>
<li>
<section class="detail" id="userMapper">
<h3>userMapper</h3>
<div class="member-signature"><span class="annotations">@Inject
</span><span class="return-type"><a href="../mapper/UserMapper.html" title="interface in pt.uc.dei.mapper">UserMapper</a></span>&nbsp;<span class="element-name">userMapper</span></div>
</section>
</li>
<li>
<section class="detail" id="finishedCourseMapper">
<h3>finishedCourseMapper</h3>
<div class="member-signature"><span class="annotations">@Inject
</span><span class="return-type"><a href="../mapper/FinishedCourseMapper.html" title="interface in pt.uc.dei.mapper">FinishedCourseMapper</a></span>&nbsp;<span class="element-name">finishedCourseMapper</span></div>
</section>
</li>
<li>
<section class="detail" id="twoFactorUtil">
<h3>twoFactorUtil</h3>
<div class="member-signature"><span class="annotations">@Inject
</span><span class="return-type"><a href="../utils/TwoFactorUtil.html" title="class in pt.uc.dei.utils">TwoFactorUtil</a></span>&nbsp;<span class="element-name">twoFactorUtil</span></div>
</section>
</li>
<li>
<section class="detail" id="activationTokenRepository">
<h3>activationTokenRepository</h3>
<div class="member-signature"><span class="return-type"><a href="../repositories/ActivationTokenRepository.html" title="class in pt.uc.dei.repositories">ActivationTokenRepository</a></span>&nbsp;<span class="element-name">activationTokenRepository</span></div>
<div class="block">Injected repository for activation token persistence.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>UserService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">UserService</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="findIfUserExists(java.lang.String)">
<h3>findIfUserExists</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">findIfUserExists</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email)</span></div>
<div class="block">Checks if a user with the given email exists in the system.
 <p>
 Searches both permanent and temporary repositories to verify whether the email is registered.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>email</code> - The email address to check for existence.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if a user (permanent or temporary) exists with the email, <code>false</code> otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="registerUser(pt.uc.dei.dtos.TemporaryUserDTO)">
<h3>registerUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">registerUser</span><wbr><span class="parameters">(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;newUser)</span></div>
<div class="block">Registers a new temporary user in the system.
 <p>
 Generates an activation token and persists the temporary user in the repository.
 Also generates a secret key for two-factor authentication.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newUser</code> - The temporary user data transfer object.</dd>
<dt>Returns:</dt>
<dd>Map containing the generated activation token and secret key for the new user.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateUser(java.lang.Long,pt.uc.dei.dtos.UpdateUserDTO)">
<h3>updateUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">updateUser</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="../dtos/UpdateUserDTO.html" title="class in pt.uc.dei.dtos">UpdateUserDTO</a>&nbsp;updateUserDTO)</span></div>
<div class="block">Updates an existing user with the provided data.
 Only non-null fields in the DTO are updated.
 Also updates manager status and notifies relevant parties if needed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - The ID of the user to update</dd>
<dd><code>updateUserDTO</code> - The DTO containing updated user data</dd>
<dt>Returns:</dt>
<dd>true if the update was successful, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUser(java.lang.Long)">
<h3>getUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../dtos/UserDTO.html" title="class in pt.uc.dei.dtos">UserDTO</a></span>&nbsp;<span class="element-name">getUser</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</span></div>
<div class="block">Retrieves a user by their unique ID and maps to a UserDTO.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - The user ID</dd>
<dt>Returns:</dt>
<dd>The mapped UserDTO, or null if not found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserProfile(java.lang.Long,boolean)">
<h3>getUserProfile</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../dtos/UserDTO.html" title="class in pt.uc.dei.dtos">UserDTO</a></span>&nbsp;<span class="element-name">getUserProfile</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 boolean&nbsp;fullResponse)</span></div>
<div class="block">Retrieves a user profile by ID, with either full or summary response.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - The user ID</dd>
<dd><code>fullResponse</code> - If true, returns full DTO; if false, returns summary DTO</dd>
<dt>Returns:</dt>
<dd>The mapped UserDTO (full or summary), or null if not found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUsers(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,int,int)">
<h3>getUsers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>&gt;</span>&nbsp;<span class="element-name">getUsers</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 int&nbsp;offset,
 int&nbsp;limit)</span></div>
<div class="block">Retrieves a paginated and filtered list of users as DTOs, with total count and pagination info.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - User ID to filter (optional)</dd>
<dd><code>email</code> - Email to filter (optional)</dd>
<dd><code>name</code> - Name or surname to filter (optional)</dd>
<dd><code>phone</code> - Phone number to filter (optional)</dd>
<dd><code>accountState</code> - Account state to filter (optional)</dd>
<dd><code>roleStr</code> - Role to filter (optional)</dd>
<dd><code>office</code> - Office to filter (optional)</dd>
<dd><code>userIsManager</code> - Manager filter (optional)</dd>
<dd><code>userIsAdmin</code> - Admin filter (optional)</dd>
<dd><code>userHasManager</code> - Managed filter (optional)</dd>
<dd><code>parameter</code> - Sorting parameter (optional)</dd>
<dd><code>orderBy</code> - Sorting order (ASCENDING or DESCENDING)</dd>
<dd><code>offset</code> - Pagination offset (start position)</dd>
<dd><code>limit</code> - Pagination limit (max results)</dd>
<dt>Returns:</dt>
<dd>Map containing the list of users, total count, offset, and limit</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateUsersCSV(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Language,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,boolean)">
<h3>generateUsersCSV</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">generateUsersCSV</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Language.html" title="enum class in pt.uc.dei.enums">Language</a>&nbsp;lang,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 boolean&nbsp;isAdmin)</span></div>
<div class="block">Generates a CSV file of all users matching the given filters and sorting (no pagination).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - User ID to filter (optional)</dd>
<dd><code>email</code> - Email to filter (optional)</dd>
<dd><code>name</code> - Name or surname to filter (optional)</dd>
<dd><code>phone</code> - Phone number to filter (optional)</dd>
<dd><code>accountState</code> - Account state to filter (optional)</dd>
<dd><code>roleStr</code> - Role to filter (optional)</dd>
<dd><code>office</code> - Office to filter (optional)</dd>
<dd><code>userIsManager</code> - Manager filter (optional)</dd>
<dd><code>userIsAdmin</code> - Admin filter (optional)</dd>
<dd><code>userHasManager</code> - Managed filter (optional)</dd>
<dd><code>lang</code> - Language for header translation</dd>
<dd><code>parameter</code> - Sorting parameter (optional)</dd>
<dd><code>orderBy</code> - Sorting order (ASCENDING or DESCENDING)</dd>
<dd><code>isAdmin</code> - Whether the export is performed by an admin (affects columns)</dd>
<dt>Returns:</dt>
<dd>CSV file as byte array</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></code> - if CSV generation fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="generateUsersXLSX(java.lang.Long,java.lang.String,java.lang.String,java.lang.String,pt.uc.dei.enums.AccountState,java.lang.String,pt.uc.dei.enums.Office,java.lang.Boolean,java.lang.Boolean,java.lang.Boolean,pt.uc.dei.enums.Language,pt.uc.dei.enums.Parameter,pt.uc.dei.enums.OrderBy,boolean)">
<h3>generateUsersXLSX</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">byte[]</span>&nbsp;<span class="element-name">generateUsersXLSX</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;email,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;name,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;phone,
 <a href="../enums/AccountState.html" title="enum class in pt.uc.dei.enums">AccountState</a>&nbsp;accountState,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;roleStr,
 <a href="../enums/Office.html" title="enum class in pt.uc.dei.enums">Office</a>&nbsp;office,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsManager,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userIsAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a>&nbsp;userHasManager,
 <a href="../enums/Language.html" title="enum class in pt.uc.dei.enums">Language</a>&nbsp;lang,
 <a href="../enums/Parameter.html" title="enum class in pt.uc.dei.enums">Parameter</a>&nbsp;parameter,
 <a href="../enums/OrderBy.html" title="enum class in pt.uc.dei.enums">OrderBy</a>&nbsp;orderBy,
 boolean&nbsp;isAdmin)</span></div>
<div class="block">Generates an XLSX file of all users matching the given filters and sorting (no pagination).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>id</code> - User ID to filter (optional)</dd>
<dd><code>email</code> - Email to filter (optional)</dd>
<dd><code>name</code> - Name or surname to filter (optional)</dd>
<dd><code>phone</code> - Phone number to filter (optional)</dd>
<dd><code>accountState</code> - Account state to filter (optional)</dd>
<dd><code>roleStr</code> - Role to filter (optional)</dd>
<dd><code>office</code> - Office to filter (optional)</dd>
<dd><code>userIsManager</code> - Manager filter (optional)</dd>
<dd><code>userIsAdmin</code> - Admin filter (optional)</dd>
<dd><code>userHasManager</code> - Managed filter (optional)</dd>
<dd><code>lang</code> - Language for header translation</dd>
<dd><code>parameter</code> - Sorting parameter (optional)</dd>
<dd><code>orderBy</code> - Sorting order (ASCENDING or DESCENDING)</dd>
<dd><code>isAdmin</code> - Whether the export is performed by an admin (affects columns)</dd>
<dt>Returns:</dt>
<dd>XLSX file as byte array</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/RuntimeException.html" title="class or interface in java.lang" class="external-link">RuntimeException</a></code> - if XLSX generation fails</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteTemporaryUserInformation(pt.uc.dei.dtos.TemporaryUserDTO)">
<h3>deleteTemporaryUserInformation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">deleteTemporaryUserInformation</span><wbr><span class="parameters">(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;userToDelete)</span></div>
<div class="block">Deletes temporary user information, removing associated activation tokens.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userToDelete</code> - The temporary user DTO to be deleted.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if deletion was successful, <code>false</code> otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deleteTemporaryUser(pt.uc.dei.dtos.TemporaryUserDTO)">
<h3>deleteTemporaryUser</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">deleteTemporaryUser</span><wbr><span class="parameters">(<a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a>&nbsp;userToDelete)</span></div>
<div class="block">Deletes a temporary user from the repository.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userToDelete</code> - The temporary user DTO to be removed.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if deletion was successful, <code>false</code> otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkIfManagerOfUser(java.lang.Long,java.lang.Long)">
<h3>checkIfManagerOfUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkIfManagerOfUser</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;managerId)</span></div>
<div class="block">Checks if a user is managed by a specific manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The user ID</dd>
<dd><code>managerId</code> - The manager ID</dd>
<dt>Returns:</dt>
<dd>true if the user is managed by the given manager, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkIfUserIsAdmin(java.lang.Long)">
<h3>checkIfUserIsAdmin</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkIfUserIsAdmin</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId)</span></div>
<div class="block">Checks if a user is an admin.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The user ID</dd>
<dt>Returns:</dt>
<dd>true if the user is an admin, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="temporaryUserEntityToTemporaryUserDTO(pt.uc.dei.entities.TemporaryUserEntity)">
<h3>temporaryUserEntityToTemporaryUserDTO</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos">TemporaryUserDTO</a></span>&nbsp;<span class="element-name">temporaryUserEntityToTemporaryUserDTO</span><wbr><span class="parameters">(<a href="../entities/TemporaryUserEntity.html" title="class in pt.uc.dei.entities">TemporaryUserEntity</a>&nbsp;temporaryUser)</span></div>
<div class="block">Converts a <a href="../entities/TemporaryUserEntity.html" title="class in pt.uc.dei.entities"><code>TemporaryUserEntity</code></a> to a <a href="../dtos/TemporaryUserDTO.html" title="class in pt.uc.dei.dtos"><code>TemporaryUserDTO</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>temporaryUser</code> - The temporary user entity.</dd>
<dt>Returns:</dt>
<dd>A data transfer object representation of the temporary user.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkAndUpdateAccountState(java.lang.Long)">
<h3>checkAndUpdateAccountState</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkAndUpdateAccountState</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId)</span></div>
<div class="block">Checks and updates the account state of a user based on profile completeness.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The user ID to check</dd>
<dt>Returns:</dt>
<dd>true if the account state was updated or already correct, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addFinishedCourse(java.lang.Long,java.lang.Long)">
<h3>addFinishedCourse</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../dtos/FinishedCourseDTO.html" title="class in pt.uc.dei.dtos">FinishedCourseDTO</a></span>&nbsp;<span class="element-name">addFinishedCourse</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;courseId)</span></div>
<div class="block">Adds a finished course for a user. Throws exceptions if user or course not found, or if already completed.
 <p>
 Also sends notification and email to the user and their manager.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The user ID</dd>
<dd><code>courseId</code> - The course ID</dd>
<dt>Returns:</dt>
<dd>The created FinishedCourseDTO</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if user or course not found</dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/IllegalStateException.html" title="class or interface in java.lang" class="external-link">IllegalStateException</a></code> - if the user already has this course as completed</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkIfUserStillIsManager(java.lang.Long)">
<h3>checkIfUserStillIsManager</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkIfUserStillIsManager</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;managerId)</span></div>
<div class="block">Checks if a user with the given ID still manages any users.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>managerId</code> - The manager's user ID</dd>
<dt>Returns:</dt>
<dd>true if the user still manages others, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateManagerStatus(pt.uc.dei.entities.UserEntity)">
<h3>updateManagerStatus</h3>
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateManagerStatus</span><wbr><span class="parameters">(<a href="../entities/UserEntity.html" title="class in pt.uc.dei.entities">UserEntity</a>&nbsp;user)</span></div>
<div class="block">Updates the manager status of a user to false and persists the change.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>user</code> - The user entity to update</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateAdminPermissions(java.lang.Long,boolean,java.lang.Long)">
<h3>updateAdminPermissions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Boolean.html" title="class or interface in java.lang" class="external-link">Boolean</a></span>&nbsp;<span class="element-name">updateAdminPermissions</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;userId,
 boolean&nbsp;isAdmin,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;requesterId)</span></div>
<div class="block">Updates admin permissions for a user.
 <p>
 Only administrators can use this functionality. Users cannot remove their own admin permissions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>userId</code> - The ID of the user to update</dd>
<dd><code>isAdmin</code> - The new admin status</dd>
<dd><code>requesterId</code> - The ID of the user making the request</dd>
<dt>Returns:</dt>
<dd>true if update was successful, false otherwise</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
