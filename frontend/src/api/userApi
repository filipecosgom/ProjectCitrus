import { api, handleApiError } from "./api"; // Import the global Axios instance

const userEndpoint = "/user"; // Keep only the relative endpoint

// User Login
export const login = async (email, password) => {
  try {
    const response = await api.post(`${userEndpoint}`, {
      email,
      password,
    });
    return response.data;
  } catch (error) {
    handleApiError(error, "login");
  }
};

const fetchUserInformation = async () => {
  try {
    const response = await api.post(`${userEndpoint}/me`); // JWT cookie sent automatically
    return response.data; // Return user details
  } catch (error) {
    console.error("Failed to fetch user:", error);
    return null; // Return null if unauthorized
  }
};